<%= form_with(model: [:admin, onsen || @onsen], html: { multipart: true, class: "space-y-6" }) do |form| %>
  <% if onsen.errors.any? %>
    <div id="error_explanation" class="bg-red-50 text-red-500 px-3 py-2 font-medium rounded-md mt-3">
      <h2><%= pluralize(onsen.errors.count, "件のエラー") %>があります:</h2>
      <ul class="list-disc ml-6">
        <% onsen.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div>
    <%= form.label :name, '名称', class: 'block font-semibold mb-1' %>
    <%= form.text_field :name, class: "block shadow-sm rounded-md border px-3 py-2 w-full border-gray-300 focus:outline-blue-600" %>
  </div>
  <div class="flex flex-col sm:flex-row gap-4">
    <div class="flex-1">
      <%= form.label :geo_lat, '緯度', class: 'block font-semibold mb-1' %>
      <%= form.text_field :geo_lat, class: "block shadow-sm rounded-md border px-3 py-2 w-full border-gray-300 focus:outline-blue-600" %>
    </div>
    <div class="flex-1">
      <%= form.label :geo_lng, '経度', class: 'block font-semibold mb-1' %>
      <%= form.text_field :geo_lng, class: "block shadow-sm rounded-md border px-3 py-2 w-full border-gray-300 focus:outline-blue-600" %>
    </div>
  </div>
  <div>
    <%= form.label :description, '説明', class: 'block font-semibold mb-1' %>
    <%= form.text_area :description, rows: 4, class: "block shadow-sm rounded-md border px-3 py-2 w-full border-gray-300 focus:outline-blue-600" %>
  </div>
  <div>
    <%= form.label :tags, 'タグ（カンマ区切り）', class: 'block font-semibold mb-1' %>
    <%= form.text_field :tags, class: "block shadow-sm rounded-md border px-3 py-2 w-full border-gray-300 focus:outline-blue-600" %>
  </div>
  <div>
    <%= form.label :url, 'URL', class: 'block font-semibold mb-1' %>
    <%= form.text_field :url, class: "block shadow-sm rounded-md border px-3 py-2 w-full border-gray-300 focus:outline-blue-600" %>
  </div>
  <div>
    <%= form.label :pet, 'ペット', class: 'block font-semibold mb-1' %>
    <%= form.check_box :pet %>
    <%= form.label :pet, "同伴可能" %>
  </div>
  <div>
    <%= form.label :style, "ジャンル", class: 'block font-semibold mb-1' %>
    <%= form.radio_button :style, "japanese" %>
    <%= form.label :style_japanese, "和" %>
    <%= form.radio_button :style, "western", class: "ml-4" %>
    <%= form.label :style_western, "洋" %>
    <%= form.radio_button :style, "", class: "ml-4" %>
    <%= form.label :style_western, "設定なし" %>
  </div>
  <div class="mb-4">
    <label class="block font-semibold mb-1">平日営業時間</label>
    <%= @onsen.weekday_hours %>
    <p class="text-sm text-gray-500 mb-2">※変更がある場合のみ入力してください</p>
    <div class="flex items-center space-x-4">
      <div>
        <%= form.label :weekday_open_time, "開店:" %>
        <%= form.time_field :weekday_open_time %>
      </div>
      <div>
        <%= form.label :weekday_close_time, "閉店:" %>
        <%= form.time_field :weekday_close_time %>
      </div>
    </div>
  </div>
  <div class="mb-4">
    <label class="block font-semibold mb-1">土日営業時間</label>
    <%= @onsen.weekend_hours %>
    <p class="text-sm text-gray-500 mb-2">※変更がある場合のみ入力してください</p>
    <div class="flex items-center space-x-4">
      <div>
        <%= form.label :weekend_open_time, "開店:" %>
        <%= form.time_field :weekend_open_time %>
      </div>
      <div>
        <%= form.label :weekend_close_time, "閉店:" %>
        <%= form.time_field :weekend_close_time %>
      </div>
    </div>
  </div>
  <div>
    <label class="block font-semibold mb-1">定休日</label>
    <% holidays = ['月','火','水','木','金','土','日'] %>
    <% holidays.each do |holiday| %>
      <%= check_box_tag 'onsen[holiday][]',
        holiday,
        @onsen.holiday.include?(holiday),
        id: "holiday_#{holiday}" %>
      <%= holiday %><br>
    <% end %>
  </div>
  <div>
    <label class="block font-semibold mb-1">駐車場(台数)</label>
    <p class="text-sm text-gray-500 mb-2">なしの場合は0</p>
    <%= form.number_field :parking, class: "border border-gray-300 rounded px-2 py-1" %>
  </div>
  <div>
    <%= form.label :images, '画像（最大5枚・JPEG/PNG/GIF）', class: 'block font-semibold mb-1' %>
    <%= form.file_field :images, multiple: true, accept: 'image/jpeg,image/png,image/gif', class: "block border rounded px-2 py-1 w-full" %>
    <% if onsen.images.attached? %>
      <div class="flex flex-wrap gap-2 mt-2">
        <% onsen.images.each_with_index do |img, idx| %>
          <div class="relative group">
            <%= image_tag img.variant(resize_to_limit: [100,100]), class: "rounded shadow border w-24 h-24 object-cover", alt: onsen.name %>
            <label class="block text-xs text-center mt-1">
              <%= check_box_tag "onsen[remove_image_ids][]", img.id, false %> 削除
            </label>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
  <div class="flex flex-col sm:flex-row gap-2">
    <%= form.submit class: "rounded-md px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white font-semibold w-full sm:w-auto" %>
  </div>
<% end %>
